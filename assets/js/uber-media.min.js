/*! Media Manager Plus 1.5.0 - JS */
jQuery(document).ready(function(a){a(".nav-tab-wrapper").on("click","a.mmp-tab",function(b){b.preventDefault(),a(this).hasClass("nav-tab-active")||(a(".ubermedia-section").hide(),a(".mmp-tab").removeClass("nav-tab-active"),a(this).addClass("nav-tab-active"),a("#section-"+a(this).attr("id")).show())}),a("#uber-media-settings").on("click",".uber-connect.connect",function(b){if(b.preventDefault(),a(this).is(".connect")){a("body").addClass("uber-media-overlay");var c=this,d=a(this).data("w"),e=a(this).data("h"),f=a(this).data("source"),g=screen.width/2-d/2,h=screen.height/2-e/2,i="location=0,status=0,width="+d+",height="+e+",top="+h+", left="+g;a(this).removeClass("connect"),a(this).removeClass("button-primary"),a('[data-source="'+f+'"]').text(wp.media.view.l10n.mmp_l10n.connecting+"..."),this.oauth_window=window.open(this.href,"Connect",i),this.interval=window.setInterval(function(){return c.oauth_window.closed?(window.clearInterval(c.interval),a("body").removeClass("uber-media-overlay"),a.post(ajaxurl,{action:"uber_check",nonce:uber_media.nonce,source:f},function(b){if("success"==b.message){a('[data-source="'+f+'"]').text(wp.media.view.l10n.mmp_l10n.disconnect),a('[data-source="'+f+'"]').addClass("disconnect");var c=a('[data-source="'+f+'"]').prop("title");a('[data-source="'+f+'"]').prop("title",c.replace(wp.media.view.l10n.mmp_l10n.connect,wp.media.view.l10n.mmp_l10n.disconnect)),a('[data-source="'+f+'"]').prop("href","#")}else a('[data-source="'+f+'"]').text(wp.media.view.l10n.mmp_l10n.connect),a('[data-source="'+f+'"]').addClass("connect"),a('[data-source="'+f+'"]').addClass("button-primary")},"json"),!1):void 0},100)}}),a("#uber-media-settings").on("click",".uber-connect.disconnect",function(b){b.preventDefault();var c=confirm(a(this).prop("title")+"?");return 1==c?(a.post(ajaxurl,{action:"uber_disconnect",nonce:uber_media.nonce,source:a(this).data("source")},function(a){"success"==a.message&&location.reload()},"json"),!1):void 0})}),function(a){var b=wp.media.view.l10n.mmp_extensions,c=!1;a.each(b,function(a,b){"media-manager-plus-importer"==b&&(c=!0)});var d=Backbone.Model.extend({}),e=Backbone.Collection.extend({model:d}),f=Backbone.Collection.extend({model:d}),g=Backbone.View.extend({tagName:"li",className:"uber-image attachment",template:wp.media.template("uberimage"),render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),h=Backbone.View.extend({tagName:"div",className:"uber-sidebar media-sidebar"}),i=Backbone.View.extend({tagName:"div",className:"uber-settings",template:wp.media.template("uberimage-settings"),events:{"click button":"updateHandler","change [data-setting]":"updateSetting","change [data-setting] input":"updateSetting","change [data-setting] select":"updateSetting","change [data-setting] textarea":"updateSetting"},render:function(){this.$el.html(this.template(this.model.toJSON()));var b=this.model.toJSON(),c=this,d=new Image;return a(d).load(function(){if(a(this).attr("id","img-uber"),a(this).attr("draggable","false"),a(this).css("display","none"),a(this).hide(),a("#uberload").hide(),a(".thumbnail").empty(),a(".thumbnail").append(this),a(this).fadeIn(function(){a("#uber-button").removeAttr("disabled")}),newimage=document.getElementById(a(this).attr("id")),null!=newimage){var b=document.getElementById(a(this).attr("id")).naturalHeight,d=document.getElementById(a(this).attr("id")).naturalWidth;c.updateModel("height",b),c.updateModel("width",d)}}).error(function(){}).attr("src",b.selected_image.dataset.full),this},updateHandler:function(b){var c=a(b.target).closest("[data-setting]"),d=b.target.value;b.preventDefault(),c.hasClass("button-group")&&($buttons=c.find("button").removeClass("active"),$buttons.filter('[value="'+d+'"]').addClass("active"))},updateSetting:function(b){var c,d,e=a(b.target).closest("[data-setting]");e.length&&(c=e.data("setting"),d=b.target.value,"checkbox"==b.target.type&&(d=a(b.target).is(":checked")?"on":"off"),this.updateModel(c,d))},updateModel:function(b,c){var d=this.model.get("custom_data");if(d){var e=new f(d.models),g=e.get(a("#uber-id").val());e.remove(a("#uber-id").val()),g.get("setting-"+b)!==c&&(g.set("setting-"+b,c),e.add(g),this.model.set("custom_data",e))}else var e=new f}});wp.media.controller.UberMedia=wp.media.controller.State.extend({initialize:function(){this.props=new Backbone.Model({custom_data:"",method:"",param:"",images:"",selected_id:"",selected_image:"",page:"",pagin:"",altpage:"",folder_path:""}),this.props.bind("change:custom_data",this.refresh,this)},refresh:function(){this.frame.toolbar.get().refresh()},importAction:function(){if(c&&!a("#mmp-import-button").is("[disabled=disabled]")){a("div.ubermedia").addClass("uber-media-overlay"),a("#method").attr("disabled","disabled"),a("#param").attr("disabled","disabled"),a("#pagination").attr("disabled","disabled"),a("#mmp-import-button").attr("disabled","disabled"),a("#uber-button").attr("disabled","disabled"),a("#mmp-import-button").text(wp.media.view.l10n.mmp_l10n.importing+"...");var b=this.props.get("custom_data"),d=new f(b.models),e=this,g=0,h=[];d.each(function(b){g++;var c=b.attributes;c["setting-import"]="on";var d=a.param(c);data="action=uber_pre_insert&nonce="+uber_media.nonce+"&imgsrc="+encodeURI(b.get("data-full"))+"&postid="+a("#post_ID").val()+"&"+d;var e=b.get("data-full");h.push(a.post(ajaxurl,data,function(a){"success"==a.message&&(e=a.imgsrc)},"json"))}),a.when.apply(this,h).done(function(){e.props.set("custom_data",""),e.props.set("selected_id",""),e.props.set("selected_image",""),a("#mmp-import-button").text(g+(g>1?" "+wp.media.view.l10n.mmp_l10n.images:" "+wp.media.view.l10n.mmp_l10n.image)+" "+wp.media.view.l10n.mmp_l10n.imported),setTimeout(function(){a("ul#uberimages li").removeClass("selected").removeClass("details"),a(".uber-sidebar").empty(),a("div.ubermedia").removeClass("uber-media-overlay"),a("#method").removeAttr("disabled"),a("#param").removeAttr("disabled"),a("#pagination").removeAttr("disabled"),a("#mmp-import-button").text(wp.media.view.l10n.mmp_l10n.import)},2e3)})}},insertAction:function(){if(!a("#uber-button").is("[disabled=disabled]")){a("#uber-button").attr("disabled","disabled"),c&&a("#mmp-import-button").attr("disabled","disabled"),a("#uber-button").text(wp.media.view.l10n.mmp_l10n.inserting+"...");var b=(this.props.get("custom_data"),this.props.get("custom_data")),d=new f(b.models),e=(d.length,this),g="",h=[];d.each(function(b){var c=b.get("setting-width"),d=b.get("setting-height");if("0"==b.get("setting-width")){var e=new Image;a(e).load(function(){a(this).attr("id","img-uber"),a(this).attr("draggable","false"),a(this).css("display","none"),a(this).hide(),newimage=document.getElementById(a(this).attr("id")),null!=newimage&&(d=document.getElementById(a(this).attr("id")).naturalHeight,c=document.getElementById(a(this).attr("id")).naturalWidth)}).error(function(){}).attr("src",b.get("data-full"))}var f=b.attributes,i=a.param(f);data="action=uber_pre_insert&nonce="+uber_media.nonce+"&imgsrc="+encodeURI(b.get("data-full"))+"&postid="+a("#post_ID").val()+"&"+i;var j,k=b.get("data-full");h.push(a.post(ajaxurl,data,function(a){"success"==a.message&&(k=a.imgsrc),c=a.imgwidth?a.imgwidth:c,d=a.imgheight?a.imgheight:d,j='<img src="'+k+'" width="'+c+'" height="'+d+'" alt="'+b.get("setting-alt")+'" title="'+b.get("setting-title")+'" class="align'+b.get("setting-align")+'" />',"none"!=b.get("setting-link-to")&&(j='<a href="'+b.get("setting-link-to")+'">'+j+"</a>"),""!=b.get("setting-caption")&&(j='[caption width="'+c+'" align="align'+b.get("setting-align")+'"]'+j+" "+b.get("setting-caption")+"[/caption]"),g=g+j+"\n\n"},"json"))}),a.when.apply(this,h).done(function(){a("#uber-button").text(wp.media.view.l10n.mmp_l10n.insert),a("#uber-button").removeAttr("disabled"),g=g.replace(/^\s+|\s+$/g,""),wp.media.editor.insert(g),e.props.set("custom_data",""),e.props.set("selected_id",""),e.props.set("selected_image",""),e.frame.close()})}}}),wp.media.view.Toolbar.UberMedia=wp.media.view.Toolbar.extend({className:"media-toolbar mmp-toolbar",initialize:function(){_.defaults(this.options,{event:"mmp_event_insert",close:!1,items:{mmp_event_insert:{text:wp.media.view.l10n.mmp_l10n.insert,style:"primary",id:"uber-button",priority:80,requires:!1,click:this.insertAction},mmp_event_import:{text:wp.media.view.l10n.mmp_l10n.import,style:"secondary",id:"mmp-import-button",priority:100,requires:!1,click:this.importAction}}}),wp.media.view.Toolbar.prototype.initialize.apply(this,arguments)},refresh:function(){c&&a("#mmp-import-button").show();var b=this.controller.state().props.get("custom_data");if(b)var d=new f(b.models);else var d=new f;var e=!1;if(d.length>0&&(e=!0),this.get("mmp_event_insert").model.set("disabled",!e),e||a("#uber-button").attr("disabled","disabled"),!e&&c)a("#mmp-import-button").attr("disabled","disabled"),a("#mmp-import-button").text(wp.media.view.l10n.mmp_l10n.import);else if(e&&c){a("#mmp-import-button").removeAttr("disabled");var g=d.length>1?" "+wp.media.view.l10n.mmp_l10n.images:" "+wp.media.view.l10n.mmp_l10n.image;a("#mmp-import-button").text(wp.media.view.l10n.mmp_l10n.import+" "+d.length+g)}return wp.media.view.Toolbar.prototype.refresh.apply(this,arguments),this},insertAction:function(){this.controller.state().insertAction()},importAction:function(){this.controller.state().importAction()}}),wp.media.view.UberMedia=wp.media.View.extend({events:{"change select#method":"setFilter","change input#param":"setParam","change select#paramselect":"setParam","click .uber-image img.image":"toggleSelectionHandler","click .uber-image img.folder":"selectFolder","click a#backfolder":"backFolder","click .uber-image a.check":"removeFromSelection","click .uber-image a":"preventDefault","click .uber-connect":"oauthPopup","click input#pagination":"getPagination"},initialize:function(){if(this.selection=new f,this.sourceDetails=this.options.sourceDetails,this.source=this.options.source,this.imageError="","#"!=this.sourceDetails.url&&(this.$connect=a("<a>",{href:this.sourceDetails.url,id:"uber-btn","class":"button uber-connect","data-source":this.source,"data-w":this.sourceDetails.w,"data-h":this.sourceDetails.h}).append("Connect"),this.connect=this.$connect[0],this.$el.append(this.connect)),this.createToolbar(),"#"!=this.sourceDetails.url){var b=this.$el.find("#uber-toolbar");a(b).hide()}this.createSidebar()},createToolbar:function(){var b,c=(this.$el.find(".ubermedia"),a("<div/>",{id:"uber-toolbar"}));this.$el.append(c),this.$el.find("#uber-toolbar").append(this.createSelect());var d=(this.$el.find(".ubermedia"),a("<input/>",{id:"param",type:"text"}));this.$el.find("#uber-toolbar").append(d),a("#param").hide();var f=(this.$el.find(".ubermedia"),a("<select/>",{id:"paramselect",html:""}));this.$el.find("#uber-toolbar").append(f),a("#paramselect").hide();var g=(this.$el.find(".ubermedia"),a("<span/>",{"class":"spinner",id:"uberspin"}));this.$el.find("#uber-toolbar").append(g),a("#uberspin").show();var h=(this.$el.find(".ubermedia"),a("<div/>",{id:"uber-msg"}));if(this.$el.append(h),a("#uber-msg").hide(),this.model.get("method"))stream=this.sourceDetails.settings[this.model.get("method")],this.filterType=this.model.get("method");else{for(var i in this.sourceDetails.settings)break;stream=this.sourceDetails.settings[i],this.filterType=i}var j=(this.$el.find(".ubermedia"),a("<input/>",{id:"page",type:"hidden",value:"1"}));this.$el.append(j),this.model.get("page")&&a(j).val(this.model.get("page"));var k=(this.$el.find(".ubermedia"),a("<input/>",{id:"altpage",type:"hidden",value:""}));this.$el.append(k),this.model.get("altpage")&&a(k).val(this.model.get("altpage"));var l=this.displayParam(stream);if(this.model.get("param")){var m=this.$el.find("#param");a(m).val(this.model.get("param"))}var n=(this.$el.find(".ubermedia"),a("<ul/>",{id:"uberimages"}));this.$el.append(n),this.clearImages();var o=(this.$el.find(".ubermedia"),a("<li/>",{id:"pagin"})),p=(this.$el.find(".ubermedia"),a("<input/>",{id:"pagination",type:"button","class":"button",value:"Load More"}));a(o).append(p),this.$el.find("#uberimages").append(o),this.model.get("images")?(this.collection=new e(b),this.collection.reset(this.model.get("images")),this.model.get("pagin")?this.$el.find("#pagination").hide():this.$el.find("#pagination").show(),this.model.get("method")&&this.displayPag(this.model.get("method")),this.model.get("folder_path")&&this.createBackLink(this.model.get("folder_path"))):(this.$el.find("#pagination").hide(),this.collection=new e(b),l.check&&"#"==this.sourceDetails.url&&(b=this.getImages(this,this.source,i,l.param,1,""))),this.on("change:filterType",this.filterByType,this),this.on("change:paramValue",this.filterByParam,this),this.collection.on("reset",this.render,this)},oauthPopup:function(b){b.preventDefault(),a("body").addClass("uber-media-overlay");var c=this,d=b.currentTarget,e=a(b.currentTarget).data("w"),f=a(b.currentTarget).data("h"),g=a(b.currentTarget).data("source"),h=screen.width/2-e/2,i=screen.height/2-f/2,j="location=0,status=0,width="+e+",height="+f+",top="+i+", left="+h;a(b.currentTarget).removeClass("connect"),b.currentTarget.oauth_window=window.open(b.currentTarget.href,"Connect",j),b.currentTarget.interval=window.setInterval(function(){return d.oauth_window.closed?(a("body").removeClass("uber-media-overlay"),window.clearInterval(d.interval),a.post(ajaxurl,{action:"uber_check",nonce:uber_media.nonce,source:g},function(b){"success"==b.message&&(c.sourceDetails.url="#",a("#uber-btn").hide(),a("#uber-toolbar").show(),c.filterType=a("#method option:selected").val(),c.trigger("change:filterType"))},"json"),!1):void 0},100)},clearImages:function(){this.$el.find("ul#uberimages li#pagin").prevAll().remove()},selectFolder:function(b){var c=a("#"+b.target.id).data("link");this.selectFolderHandler(c)},createBackLink:function(b){var c=a("<a/>",{"class":"back-link",id:"backfolder",href:"#",text:"Back","data-link":b});this.$el.find("#uber-toolbar").append(c)},selectFolderHandler:function(b){if(this.model.set("folder_path",""),"/"!=b){var c=b.split("/");c.pop();var d="/";c.length>1&&(d=c.join("/")),0==a("#backfolder").length?this.createBackLink(d):a("#backfolder").data("link",d),this.model.set("folder_path",d),this.$el.find("#backfolder").show()}else this.$el.find("#backfolder").hide();this.setParamManual(b)},backFolder:function(b){b.preventDefault(),this.clearSidebar(),this.clearSidebar(),this.model.set("selected_id",""),this.model.set("selected_image",""),this.model.set("custom_data",""),this.setButtonStates("");var c=a(b.target).data("link");this.selectFolderHandler(c)},toggleSelectionHandler:function(b){if(!a("div.ubermedia").hasClass("uber-media-overlay")){var c="";b.shiftKey?c="between":(b.ctrlKey||b.metaKey)&&(c="toggle"),this.toggleSelection(c,b)}},toggleSelection:function(b,c){a("#uber-button").attr("disabled","disabled"),a("ul#uberimages li").removeClass("details"),a("#"+c.target.id).closest("li").hasClass("selected")?a("#"+c.target.id).closest("li").addClass("details"):(""==b&&(a("ul#uberimages li").removeClass("selected"),this.selection.reset()),a("#"+c.target.id).closest("li").addClass("selected details")),this.$el.find(".uber-sidebar").empty(),check_id=c.target.id;var d=a(c.target).getAttributes();d["setting-title"]=d.title,d["setting-alt"]=d.title,d["setting-caption"]="",d["setting-align"]="none",d["setting-link-to"]="none",d["setting-width"]="0",d["setting-height"]="0";var e=wp.media.view.l10n.mmp_defaults;_.each(e,function(a,b){d[b]=a},this),this.selection.add(d),this.custom_update(this.selection,c),this.populateSidebar(this.model),this.setButtonStates(this.selection)},preventDefault:function(a){a.preventDefault()},clearSelection:function(a,b){1==b&&(this.model.set("selected_id",""),this.model.set("selected_image","")),a&&(this.model.set("custom_data",a),this.setButtonStates(a))},setButtonStates:function(b){var d=!1;if(""!=b&&b.length>0&&(d=!0),d||a("#uber-button").attr("disabled","disabled"),!d&&c)a("#mmp-import-button").attr("disabled","disabled"),a("#mmp-import-button").text(wp.media.view.l10n.mmp_l10n.import);else if(d&&c){a("#mmp-import-button").removeAttr("disabled");var e=b.length>1?" "+wp.media.view.l10n.mmp_l10n.images:" "+wp.media.view.l10n.mmp_l10n.image;a("#mmp-import-button").text(wp.media.view.l10n.mmp_l10n.import+" "+b.length+e)}},removeFromSelection:function(b){if(!a("div.ubermedia").hasClass("uber-media-overlay")){var c=b.currentTarget.id;if("A"==b.currentTarget.tagName)var d=c.substring(11);else var d=c.substring(6);this.selection.remove(this.selection.get(d)),a("#"+b.target.id).closest("li").removeClass("selected"),a("#"+b.target.id).closest("li").removeClass("details");var e=!1;this.model.get("selected_id")==d&&(e=!0,this.$el.find(".uber-sidebar").empty()),this.clearSelection(this.selection,e)}},clearSidebar:function(){this.clearImages(),this.clearSelection(),this.model.set("selected_id",""),this.model.set("selected_image",""),a(".uber-sidebar").empty()},render:function(){var b=this;if(this.collection&&(this.collection.models.length>0?(this.clearImages(),_.each(this.collection.models,function(a){this.$el.find("#pagin").before(b.renderImage(a))},this),this.$el.find("#uberspin").hide()):""!=this.imageError&&(a("#uber-msg").text(this.imageError),a("#uber-msg").show(),this.$el.find("#uberspin").hide()),this.imageError=""),this.model.get("selected_image")){var b=this,c=this.$el.find("img#"+this.model.get("selected_id"));if(a(c).closest("li").addClass("details"),this.populateSidebar(this.model),this.model.get("custom_data")){var d=this.model.get("custom_data"),e=new f(d.models);e.each(function(c){var d=b.$el.find("img#"+c.get("id"));a(d).closest("li").addClass("selected")})}a("#uber-button").removeAttr("disabled")}},renderImage:function(a){var b=new g({model:a});return b.render().el},custom_update:function(a,b){this.model.set("selected_id",b.target.id),this.model.set("selected_image",b.target),this.model.set("custom_data",a)},createSelect:function(){var b=(this.$el.find(".ubermedia"),a("<select/>",{html:"",id:"method"})),c=this;return _.each(this.sourceDetails.settings,function(d,e){if(c.model.get("method")&&c.model.get("method")==e){a("<option/>",{value:e,text:d.name,selected:"selected"}).appendTo(b)}else{a("<option/>",{value:e,text:d.name}).appendTo(b)}}),b},getImages:function(b,c,d,f,g,h){this.$el.find("#uberspin").show(),this.$el.find("#uber-msg").hide(),this.$el.find("#pagination").val("Loading..."),this.$el.find("#pagination").attr("disabled","disabled"),1==g&&(this.$el.find("#pagination").hide(),this.clearImages());var i;a.post(ajaxurl,{action:"uber_load_images",source:c,method:d,param:f,page:g,altpage:h},function(c){if(c.error?(b.imageError=c.message,b.$el.find("#pagination").hide()):(i=c.images,d==b.filterType&&(1==g?b.model.set("images",i):(original=b.model.get("images"),b.model.set("images",original.concat(i))))),d==b.filterType){if(1==g)b.collection.reset(i);else{var f=new e(i);b.collection.add(f.models),_.each(f.models,function(a){b.$el.find("#pagin").before(b.renderImage(a))},this)}b.displayPag(d),b.$el.find("#pagination").val("Load More"),b.$el.find("#uberspin").hide(),"end"==c.pagin?b.model.set("pagin","end"):c.error?b.$el.find("#pagination").hide():(b.$el.find("#pagination").removeAttr("disabled"),b.model.set("pagin","")),c.altpage&&(b.model.set("altpage",c.altpage),a("#altpage").val(c.altpage))}else b.$el.find("#uberspin").hide()},"json")},getPagination:function(){var b=a("#page").val();b++,a("#page").val(b),this.model.set("page",b);var c=a("#altpage").val();this.model.set("altpage",c),this.getImages(this,this.source,this.$el.find("#method").val(),this.model.get("param"),b,c)},displayPag:function(a){this.$el.find("#pagination").show(),stream=this.sourceDetails.settings[a],stream.nopagin&&this.$el.find("#pagination").hide()},displayParam:function(b){var c=new Object;if(c.check=!1,c.param="",paraminput=this.$el.find("#param").hide(),paramselect=this.$el.find("#paramselect").hide(),b.param){this.$el.find("#pagination").attr("disabled","disabled");var d=b.param_default?b.param_default:"";if(c.param=d,this.$el.find("#param").val(d),this.$el.find("#param").attr("placeholder",b.param_desc),b.param_disabled&&this.$el.find("#param").attr("disabled","disabled"),"text"==b.param_type)this.$el.find("#param").show(),this.$el.find("#paramselect").hide();else{var e=this;b.param_dynamic&&!b.param_choices&&"#"==this.sourceDetails.url?(this.$el.find("#uberspin").show(),a.post(ajaxurl,{action:"uber_param_choices",source:e.source,method:e.$el.find("#method").val()},function(a){e.populateParamSelect(a.choices,paramselect),b.param_choices=a.choices,e.sourceDetails.settings[e.$el.find("#method").val()]=b},"json")):b.param_dynamic&&!b.param_choices&&"#"!=this.sourceDetails.url?this.populateParamSelect([],paramselect):this.populateParamSelect(b.param_choices,paramselect)}}return this.$el.find("#pagination").show(),b.nopagin&&this.$el.find("#pagination").hide(),c.check=b.param_default?b.param_default:!b.param,c},populateParamSelect:function(b,c){var d=this;_.each(b,function(b,e){if(d.model.get("param")&&d.model.get("param")==e){a("<option/>",{value:e,text:b,selected:"selected"}).appendTo(c)}else{a("<option/>",{value:e,text:b}).appendTo(c)}}),this.$el.find("#param").hide(),this.$el.find("#paramselect").show(),this.$el.find("#uberspin").hide()},createSidebar:function(){var a=new h;this.$el.append(a.render().el)},populateSidebar:function(a){var b=new i({model:a});this.$el.find(".uber-sidebar").append(b.render().el)},setFilter:function(a){this.clearSidebar(),this.filterType=a.currentTarget.value,this.model.set("method",a.currentTarget.value),this.model.set("param",""),this.trigger("change:filterType")},setParam:function(a){""!=a.currentTarget.value&&this.setParamManual(a.currentTarget.value)},setParamManual:function(b){this.clearSidebar(),this.paramValue=b,this.model.set("param",b),a("#param").val(b),this.trigger("change:paramValue")},filterByType:function(){this.clearSidebar(),this.model.set("selected_id",""),this.model.set("selected_image",""),this.model.set("custom_data",""),this.setButtonStates(""),this.$el.find("#uberspin").hide(),this.$el.find("#pagination").val("Load More"),this.$el.find("#page").val("1"),this.$el.find("#altpage").val(""),stream=this.sourceDetails.settings[this.filterType];var a=this.displayParam(stream);if(a.check){this.getImages(this,this.source,this.filterType,a.param,1,"")}else this.$el.find("#pagination").hide(),this.collection.reset()},filterByParam:function(){this.$el.find("#page").val("1"),this.$el.find("#altpage").val("");this.getImages(this,this.source,this.$el.find("#method").val(),this.paramValue,1,"")}});var j=wp.media.view.MediaFrame.Post;wp.media.view.MediaFrame.Post=j.extend({initialize:function(){j.prototype.initialize.apply(this,arguments);var b=wp.media.view.l10n.mmp_sources,c=this,d=200;a.each(b,function(a,b){c.states.add([new wp.media.controller.UberMedia({id:a,menu:wp.media.view.l10n.mmp_menu,content:a+"-custom",title:wp.media.view.l10n.mmp_menu_prefix+" "+b.name,priority:d+100,toolbar:a+"-action",type:"link"})]),c.on("content:render:"+a+"-custom",_.bind(c.customContent,c,a,b)),c.on("toolbar:create:"+a+"-action",c.createCustomToolbar,c),c.on("toolbar:render:"+a+"-action",c.renderCustomToolbar,c)})},createCustomToolbar:function(a){a.view=new wp.media.view.Toolbar.UberMedia({controller:this})},customContent:function(a,b){this.$el.addClass("hide-router");var c=new wp.media.view.UberMedia({controller:this,model:this.state().props,className:"ubermedia media-"+a,sourceDetails:b,source:a});this.content.set(c)}})}(jQuery),function(a){a.fn.getAttributes=function(){var b={};return this.length&&a.each(this[0].attributes,function(a,c){b[c.name]=c.value}),b}}(jQuery);